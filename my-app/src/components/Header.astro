---
// Header.astro - Main site header with logo and navigation
// Displays Internal Transit branding and navigation links
// Responsive with mobile-friendly hamburger menu structure (CSS-only)

const navLinks = [
  { label: 'Blog', href: '/blog' },
  { label: 'Podcast', href: '/podcast' },
  { label: 'Portfolio', href: '/portfolio' },
  { label: 'About', href: '/about' },
];
---

<header class="bg-white border-b border-gray-200">
  <nav class="container-wide">
    <div class="flex items-center justify-between py-4">
      {/* Logo/Brand Section */}
      <a href="/" class="no-underline flex items-center gap-3 hover:opacity-80 transition-opacity">
        {/* Internal Transit Logo */}
        <img
          src="/internal-transit-icon.png"
          alt="Internal Transit - Home"
          class="h-10 w-auto"
        />
        <span class="text-xl font-bold text-transit-charcoal">Internal Transit</span>
      </a>

      {/* Navigation Menu - Desktop and Mobile */}
      <div class="flex items-center gap-8">
        {/* Desktop Navigation */}
        <nav class="hidden md:flex gap-8">
          {navLinks.map((link) => (
            <a
              href={link.href}
              class="nav-link"
            >
              {link.label}
            </a>
          ))}
        </nav>

        {/* Mobile Menu Toggle Button */}
        <button
          class="md:hidden p-2 hover:bg-gray-100 rounded-lg transition-colors"
          aria-label="Toggle navigation menu"
          aria-expanded="false"
          id="mobile-menu-toggle"
        >
          {/* Hamburger Menu Icon */}
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"
            ></path>
          </svg>
        </button>
      </div>
    </div>

    {/* Mobile Navigation Menu - Hidden by default, shown with CSS class */}
    <nav
      id="mobile-menu"
      class="hidden md:hidden flex-col gap-4 pb-4 border-t border-gray-200"
    >
      {navLinks.map((link) => (
        <a
          href={link.href}
          class="nav-link block py-2 px-2 text-base"
        >
          {link.label}
        </a>
      ))}
    </nav>
  </nav>
</header>

{/* Transit line visual element under header is handled in BaseLayout */}

<style>
  /* Mobile menu toggle functionality using CSS class */
  nav#mobile-menu.active {
    display: flex;
  }

  /* Smooth animation for menu button */
  button#mobile-menu-toggle {
    transition: background-color 0.2s;
  }

  button#mobile-menu-toggle:active {
    background-color: rgba(255, 107, 0, 0.1);
  }
</style>

<script>
  // Simple mobile menu toggle using CSS class
  // No framework dependencies, vanilla JavaScript only
  const toggle = document.getElementById('mobile-menu-toggle');
  const menu = document.getElementById('mobile-menu');

  if (toggle && menu) {
    toggle.addEventListener('click', () => {
      menu.classList.toggle('active');

      // Update aria-expanded for accessibility
      const isExpanded = toggle.getAttribute('aria-expanded') === 'true';
      toggle.setAttribute('aria-expanded', String(!isExpanded));
    });

    // Close menu when a link is clicked
    const menuLinks = menu.querySelectorAll('a');
    menuLinks.forEach(link => {
      link.addEventListener('click', () => {
        menu.classList.remove('active');
        toggle.setAttribute('aria-expanded', 'false');
      });
    });
  }
</script>
